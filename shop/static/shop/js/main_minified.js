$(document).ready(function(){let t=parseInt($(".main-price").find(".product-regular-price").text()),e=parseInt($(".main-price").find(".product-sale-price").text()),a=$(".main-price").find(".money_saved").text(),i=$(".main-price").find(".percentage").text(),r=$(".product-attributes").find(".attribute-title").text();var c=parseInt($("#cart-count").text());function d(){$("#sidecart").toggleClass("sidecart-active"),$(".lightbox").toggleClass("lightbox-active")}function s(){$(".lightbox").toggleClass("lightbox-active lightbox-search"),$(".lightbox").find("form").toggleClass("disabled")}$("div#container").on("click","button.alert",function(){alert(1)}),$(".header-menu").click(function(t){$(this).toggleClass("active"),$("#navigation").toggleClass("active")}),$("#search-mobile").click(function(t){s()}),$(".close-search").click(function(t){s()}),$(".header-cart").click(function(t){!1==$("#sidecart").hasClass("sidecart-active")&&d()}),$(".cart-close").click(function(t){d()}),$(".lightbox").click(function(){$("#sidecart").hasClass("sidecart-active")&&d()}),slide1=$(".slider-wrapper1").find(".slide").innerWidth(),slide2=$(".slider-wrapper2").find(".slide").innerWidth();var n=1,o=1,l=$(".slider-wrapper1").find(".slide").length,f=$(".slider-wrapper2").find(".slide").length;function u(){var t=Math.floor(57*Math.random()+1);let e=["Александар","Ангела","Марија","Елена","Здравко","Зорица","Костадин","Живка","Никола","Ева","Наум","Филип","Бранкица","Мартин","Ивана","Ристе","Лилјана","Борис","Ефимија","Живко","Христина","Васил"];var a=e[Math.floor(Math.random()*e.length)];$.ajax({url:"/get_recent_ordered",type:"GET",dataType:"json",success:function(e){$("#ordered_items_notice").attr("href",e.url),$("#ordered_product_thumbnail").attr("src",e.thumbnail),$("#order_person_name").html(a),$("#order_person_product_name").html(e.title),$("#order_product_regular_price").html(e.regular_price),$("#order_product_sale_price").html(e.sale_price),$("#ordered_items_notice_wrapper").fadeToggle(400),$("#order_time_minutes_ago").html(t),setTimeout(function(){$("#ordered_items_notice_wrapper").fadeOut(400)},5e3)}}),setTimeout(u,1e3*Math.floor(8*Math.random()+13))}$(".slider-wrapper1").on("click",".slide-arrow",function(){slidescontainer=$(".slide-arrow-next1").next("ul"),$(this).hasClass("slide-arrow-next1")&&(slidescontainer.scrollLeft(slide1*n),(slide1>220&&n<l-3||slide1<220&&n<l-1)&&n++),$(this).hasClass("slide-arrow-prev1")&&(slideleft=slide1*(n-1),slidescontainer.scrollLeft(slideleft-slide1),n>1&&n--)}),$(".slider-wrapper2").on("click",".slide-arrow",function(){slidescontainer=$(".slide-arrow-next2").next("ul"),$(this).hasClass("slide-arrow-next2")&&(slidescontainer.scrollLeft(slide2*o),(slide2>220&&o<f-3||slide2<220&&o<f-1)&&o++),$(this).hasClass("slide-arrow-prev2")&&(slideleft=slide2*(o-1),slidescontainer.scrollLeft(slideleft-slide2),o>1&&o--)}),$(document).on("click",".increment-btn",function(t){t.preventDefault();var e=$(this).closest(".product_data").find(".qty-input").val(),a=parseInt(e,10);a=isNaN(a)?0:a,a++,$(this).closest(".product_data").find(".qty-input").val(a)}),$(document).on("click",".decrement-btn",function(t){t.preventDefault();var e=$(this).closest(".product_data").find(".qty-input").val(),a=parseInt(e,10);(a=isNaN(a)?0:a)>1&&(a--,$(this).closest(".product_data").find(".qty-input").val(a))}),$(document).on("click",".add-to-cartBtn",function(t){button=$(this),t.stopPropagation(),t.preventDefault(),$(this).find(".load-spinner").css("display","inline-block"),$(this).find(".btn-text").css("display","none");var e=$(this).closest(".product_data").find(".prod_id").val(),a=$(this).closest(".product_data").find(".qty-input").val();$(this).closest(".product_data").find(".product-price-tracker").text(),$(this.closest(".product_data")).find(".prod_title_tracker").text();var i=$("input[name=csrfmiddlewaretoken]").val();if(null==a&&(a=1),$(button).hasClass("stickyBtn")){var e=$(".product-page.product_data").find(".prod_id").val(),a=$(".product-page.product_data").find(".qty-input").val();null==a&&(a=1)}$.ajax({method:"POST",url:"/add-to-cart",data:{product_id:e,product_qty:a,csrfmiddlewaretoken:i},success:function(t){$(button).hasClass("sidecartOfferBtn")?!1==$(button).hasClass("addedBtn")&&($(button).toggleClass("addedBtn").html("ДОДАДЕН"),c++,$("#cart-count").html(c),$(".sidecart-inner").load(location.href+" .sidecart-inner")):$(button).hasClass("checkout-offerBtn")?(!1==$(button).hasClass("addedBtn")&&$(button).toggleClass("addedBtn").html("ДОДАДЕН"),$(".cart-data").load(location.href+" .cart-data")):$(button).hasClass("proceed-to-checkout")?window.location.href="/checkout/":(c+=parseInt(a),$("#cart-count").html(c),$(".sidecart-inner").load(location.href+" .sidecart-inner"),!1==$(button).hasClass("mainaddedBtn")?setTimeout(()=>{$(button).toggleClass("mainaddedBtn").html("ДОДАДЕН"),d()},250):d())}})}),$(document).on("click",".offerBtn",function(t){if(t.stopPropagation(),t.preventDefault(),button=$(this),!$(button).hasClass("addedBtn")){var e=$(this).closest(".product_data").find(".prod_id").val(),a=1,i=$(this).closest(".product_data").find(".offer_price").val();$(this.closest(".product_data")).find(".prod_title_tracker").text();var r=$("input[name=csrfmiddlewaretoken]").val();null==a&&(a=1),$.ajax({method:"POST",url:"/offer-add-to-cart",data:{product_id:e,product_qty:a,product_price:i,csrfmiddlewaretoken:r},success:function(t){$(button).hasClass("sidecartOfferBtn")?!1==$(button).hasClass("addedBtn")&&($(button).toggleClass("addedBtn").html("ДОДАДЕН"),c++,$("#cart-count").html(c),$(".sidecart-inner").load(location.href+" .sidecart-inner")):$(button).hasClass("checkout-offerBtn")&&(!1==$(button).hasClass("addedBtn")&&$(button).toggleClass("addedBtn").html("ДОДАДЕН"),$(".cart-data").load(location.href+" .cart-data"))}})}}),$(document).on("click",".variable-add-to-cartBtn",function(t){button=$(this);var e=$(this).closest(".product_data").find(".prod_id").val(),a=$(this).closest(".product_data").find(".qty-input").val(),i=$(".product-attributes").find(".attribute-item.active");$(this.closest(".product_data")).find(".prod_title_tracker").text();var r=$("input[name=csrfmiddlewaretoken]").val(),s=0,n=null;if(null==a&&(a=1),$(button).hasClass("stickyBtn")){var e=$(".product-page.product_data").find(".prod_id").val(),a=$(".product-page.product_data").find(".qty-input").val();null==a&&(a=1)}$(i).length?(s=$(i).find(".attrib_id").val(),n=$(i).find(".attrib_type").val(),product_price=$(".main-price").find(".product-price-tracker").text(),$(this).find(".load-spinner").css("display","inline-block"),$(this).find(".btn-text").css("display","none"),$.ajax({method:"POST",url:"/variable-add-to-cart",data:{product_id:e,product_qty:a,attribute_id:s,csrfmiddlewaretoken:r},success:function(t){$(button).hasClass("proceed-to-checkout")?window.location.href="/checkout/":(c+=parseInt(a),$("#cart-count").html(c),$(".sidecart-inner").load(location.href+" .sidecart-inner"),!1==$(button).hasClass("mainaddedBtn")?setTimeout(()=>{$(button).toggleClass("mainaddedBtn").html("ДОДАДЕН"),d()},250):d())}})):$(".attribute-title").css("color","red").animate({"font-size":"16px","font-weight":"700"},300).animate({"font-size":"12px","font-weight":"700"})}),$(".offer-box").on("click",".offer-button",function(t){if(button=$(this),$(button).hasClass("addedBtn"))return 1;t.stopPropagation(),t.preventDefault();var e=$(this).closest(".offer-box").find(".order_id").val(),a=$(this).closest(".offer-box").find(".prod_id").val(),i=$(this).closest(".offer-box").find(".qty-input").val(),r=$("input[name=csrfmiddlewaretoken]").val();$.ajax({method:"POST",url:"/add-to-order",data:{order_id:e,product_id:a,product_qty:i,csrfmiddlewaretoken:r},success:function(t){$(button).addClass("addedBtn").html("ДОДАДЕН"),$(".cart-data").load(location.href+" .cart-data")}})}),$(".sidecart-offer-item").on("click","sidecart-offer-item",function(t){t.preventDefault()}),$(".product-attributes").on("click",".attribute-item",function(){if(!$(this).hasClass("disabled")){attrib_title=": "+$(this).find(".attrib_title").val();var c=$(this).find(".attrib_id").val();$("."+c+"_variable").length&&(image=$("."+c+"_variable").not(".slick-cloned"),$(".slider-holder").slick("slickGoTo",image.index()-1)),$(this).hasClass("offer")?(offer_regular_price=t*$(this).index(),offer_price=parseInt($(this).find(".offer-price").text()),$(".main-price").find(".product-regular-price").text(offer_regular_price+" ден"),$(".main-price").find(".product-price-tracker").text(offer_price),1!=$(this).index()?($(".main-price").find(".money_saved").text(parseInt(offer_regular_price-offer_price)),$(".main-price").find(".percentage").text("-"+parseInt(100-offer_price/offer_regular_price*100)+"%")):($(".main-price").find(".money_saved").text(a),$(".main-price").find(".percentage").text(i))):(offer_price=$(this).find(".attrib_price").val(),e!=offer_price?(offer_regular_price=t*$(this).index(),$(".main-price").find(".product-regular-price").text(offer_regular_price+" ден"),$(".main-price").find(".money_saved").text(parseInt(offer_regular_price-offer_price)),$(".main-price").find(".percentage").text("-"+parseInt(100-offer_price/offer_regular_price*100)+"%")):(offer_regular_price=t,$(".main-price").find(".product-regular-price").text(offer_regular_price+" ден"),$(".main-price").find(".money_saved").text(a),$(".main-price").find(".percentage").text(i)),$(".main-price").find(".product-price-tracker").text(offer_price)),$(".product-attributes div").removeClass("active"),$(this).toggleClass("active"),$(".attribute-title").text(r+attrib_title),$(".attribute-title").css("color","#0f0f0f")}}),$(document).on("click",".changeQuantity",function(t){t.preventDefault(),button=$(this);var e=$(this).closest(".product_data").find(".prod_id").val(),a=$(this).closest(".product_data").find(".qty-input").val(),i=0;$(this).closest(".product_data").find(".attrib_id").val()>0&&(i=$(this).closest(".product_data").find(".attrib_id").val());var r=$("input[name=csrfmiddlewaretoken]").val();$.ajax({method:"POST",url:"/update-cart",data:{product_id:e,product_qty:a,attribute_id:i,csrfmiddlewaretoken:r},success:function(t){$(button).hasClass("sidecart-qty")?$(".sidecart-inner").load(location.href+" .sidecart-inner"):$(".cart-data").load(location.href+" .cart-data")}})}),$(document).on("click",".remove-item",function(t){t.preventDefault();var e=$(this).closest(".product_data").find(".prod_id").val(),a=parseInt($(this).closest(".product_data").find(".sidecart-item-quantity").text()),i=0;$(this).closest(".product_data").find(".attrib_id").val()>0&&(i=$(this).closest(".product_data").find(".attrib_id").val());var r=$("input[name=csrfmiddlewaretoken]").val(),d=$("#cart_items_count").val();$.ajax({method:"POST",url:"/delete-cart-item",data:{product_id:e,attribute_id:i,csrfmiddlewaretoken:r},success:function(t){window.location.href.indexOf("checkout")>-1?($(".cart-data").load(location.href+" .cart-data"),$(".checkout-offers").load(location.href+" .checkout-offers"),1==d&&($(".content-container.checkout").remove(),$(".page-container").append('<div class="content-container checkout"><div class="no-cart"><h2 class="no-cart-title">Немате производи во кошничка</h2><a href="/" class="no-cartBtn">Врати ме на почетна</a></div></div>'))):(c-=parseInt(a),$(".sidecart-inner").load(location.href+" .sidecart-inner"),$("#cart-count").html(c))}})}),$(".checkout-fees").on("click",".fee-toggle",function(t){t.preventDefault(),$(this).find(".fee-icon").toggleClass("active"),$(this).closest(".checkout-fees").find(".fee-description").slideToggle("next")}),$(".checkout-fees").on("click",".fee-add",function(t){t.preventDefault(),button=$(this),fee_action="add",$(this).closest(".checkout-fees").hasClass("active")&&(fee_action="remove");var e=$(this).closest(".fee_data").find(".fee_id").val(),a=$("input[name=csrfmiddlewaretoken]").val();$.ajax({method:"POST",url:"/add-or-delete-fee",data:{fee_id:e,action:fee_action,csrfmiddlewaretoken:a},success:function(t){$(button).closest(".checkout-fees").hasClass("active")?($(button).toggleClass("addedBtn").html("ДОДАЈ"),$(button).closest(".checkout-fees").toggleClass("active")):($(button).toggleClass("addedBtn").html("ДОДАДЕН"),$(button).closest(".checkout-fees").toggleClass("active")),$(".cart-data").load(location.href+" .cart-data")}})}),$(".toggle-title").click(function(t){$(this).next(".toggle-content").slideToggle("fast")}),$(".checkout-dostava").click(function(t){$(".checkout-garancija").hasClass("active")&&($(".checkout-garancija").removeClass("active"),$(".checkout-garancija-content").slideToggle("fast")),$(this).toggleClass("active"),$(".checkout-dostava-content").slideToggle("fast")}),$(".checkout-garancija").click(function(t){$(".checkout-dostava").hasClass("active")&&($(".checkout-dostava").removeClass("active"),$(".checkout-dostava-content").slideToggle("fast")),$(this).toggleClass("active"),$(".checkout-garancija-content").slideToggle("fast")}),$("#ordered_items_notice_wrapper")&&($(document).on("click","#close_ordered_items_notice",function(t){t.preventDefault(),$("#ordered_items_notice_wrapper").fadeOut(200)}),setTimeout(u,1e3*Math.floor(8*Math.random()+13)))});
