$(document).ready(function(){let t=parseInt($(".main-price").find(".product-regular-price").text());var e=parseInt($("#cart-count").text());function a(){$("#sidecart").toggleClass("sidecart-active"),$(".lightbox").toggleClass("lightbox-active")}function i(){$(".lightbox").toggleClass("lightbox-active lightbox-search"),$(".lightbox").find("form").toggleClass("disabled")}$("div#container").on("click","button.alert",function(){alert(1)}),$(".header-menu").click(function(t){$(this).toggleClass("active"),$("#navigation").toggleClass("active")}),$("#search-mobile").click(function(t){i()}),$(".close-search").click(function(t){i()}),$(".header-cart").click(function(t){!1==$("#sidecart").hasClass("sidecart-active")&&a()}),$(".cart-close").click(function(t){a()}),$(".lightbox").click(function(){$("#sidecart").hasClass("sidecart-active")&&a()}),slide1=$(".slider-wrapper1").find(".slide").innerWidth(),slide2=$(".slider-wrapper2").find(".slide").innerWidth();var c=1,s=1,d=$(".slider-wrapper1").find(".slide").length,o=$(".slider-wrapper2").find(".slide").length;$(".slider-wrapper1").on("click",".slide-arrow",function(){slidescontainer=$(".slide-arrow-next1").next("ul"),$(this).hasClass("slide-arrow-next1")&&(slidescontainer.scrollLeft(slide1*c),(slide1>220&&c<d-3||slide1<220&&c<d-1)&&c++),$(this).hasClass("slide-arrow-prev1")&&(slideleft=slide1*(c-1),slidescontainer.scrollLeft(slideleft-slide1),c>1&&c--)}),$(".slider-wrapper2").on("click",".slide-arrow",function(){slidescontainer=$(".slide-arrow-next2").next("ul"),$(this).hasClass("slide-arrow-next2")&&(slidescontainer.scrollLeft(slide2*s),(slide2>220&&s<o-3||slide2<220&&s<o-1)&&s++),$(this).hasClass("slide-arrow-prev2")&&(slideleft=slide2*(s-1),slidescontainer.scrollLeft(slideleft-slide2),s>1&&s--)}),$(document).on("click",".increment-btn",function(t){t.preventDefault();var e=$(this).closest(".product_data").find(".qty-input").val(),a=parseInt(e,10);a=isNaN(a)?0:a,a++,$(this).closest(".product_data").find(".qty-input").val(a)}),$(document).on("click",".decrement-btn",function(t){t.preventDefault();var e=$(this).closest(".product_data").find(".qty-input").val(),a=parseInt(e,10);(a=isNaN(a)?0:a)>1&&(a--,$(this).closest(".product_data").find(".qty-input").val(a))}),$(document).on("click",".add-to-cartBtn",function(t){button=$(this),t.stopPropagation(),t.preventDefault();var i=$(this).closest(".product_data").find(".prod_id").val(),c=$(this).closest(".product_data").find(".qty-input").val(),s=$("input[name=csrfmiddlewaretoken]").val();if(null==c&&(c=1),$(button).hasClass("stickyBtn")){var i=$(".product_data").find(".prod_id").val(),c=$(".product_data").find(".qty-input").val();null==c&&(c=1)}$.ajax({method:"POST",url:"/add-to-cart",data:{product_id:i,product_qty:c,csrfmiddlewaretoken:s},success:function(t){$(button).hasClass("sidecartOfferBtn")?!1==$(button).hasClass("addedBtn")&&($(button).toggleClass("addedBtn").html("ДОДАДЕН"),e++,$("#cart-count").html(e),$(".sidecart-inner").load(location.href+" .sidecart-inner")):$(button).hasClass("checkout-offerBtn")?(!1==$(button).hasClass("addedBtn")&&$(button).toggleClass("addedBtn").html("ДОДАДЕН"),$(".cart-data").load(location.href+" .cart-data")):$(button).hasClass("proceed-to-checkout")?window.location.href="https://greengoshop.mk/checkout":(!1==$(button).hasClass("mainaddedBtn")&&$(button).toggleClass("mainaddedBtn").html("ДОДАДЕН"),e+=parseInt(c),$("#cart-count").html(e),$(".sidecart-inner").load(location.href+" .sidecart-inner"),a())}})}),$(document).on("click",".variable-add-to-cartBtn",function(t){button=$(this);var i=$(this).closest(".product_data").find(".prod_id").val(),c=$(this).closest(".product_data").find(".qty-input").val(),s=$(".product-attributes").find(".attribute-item.active"),d=$("input[name=csrfmiddlewaretoken]").val(),o=0,r=null;if(null==c&&(c=1),$(button).hasClass("stickyBtn")){var i=$(".product_data").find(".prod_id").val(),c=$(".product_data").find(".qty-input").val();null==c&&(c=1)}$(s).length?(o=$(s).find(".attrib_id").val(),r=$(s).find(".attrib_type").val(),$.ajax({method:"POST",url:"/variable-add-to-cart",data:{product_id:i,product_qty:c,attribute_id:o,csrfmiddlewaretoken:d},success:function(t){$(button).hasClass("proceed-to-checkout")?window.location.href="https://greengoshop.mk/checkout":(e+=parseInt(c),$("#cart-count").html(e),$(".sidecart-inner").load(location.href+" .sidecart-inner"),$(button).html("ДОДАДЕН"),a())}})):$(".attribute-title").css("color","red")}),$(".offer-box").on("click",".offer-button",function(t){if(button=$(this),$(button).hasClass("addedBtn"))return 1;t.stopPropagation(),t.preventDefault();var e=$(this).closest(".offer-box").find(".order_id").val(),a=$(this).closest(".offer-box").find(".prod_id").val(),i=$("input[name=csrfmiddlewaretoken]").val();$.ajax({method:"POST",url:"/add-to-order",data:{order_id:e,product_id:a,product_qty:1,csrfmiddlewaretoken:i},success:function(t){$(button).addClass("addedBtn").html("ДОДАДЕН"),$(".cart-data").load(location.href+" .cart-data")}})}),$(".sidecart-offer-item").on("click","sidecart-offer-item",function(t){t.preventDefault()}),$(".product-attributes").on("click",".attribute-item",function(){$(this).hasClass("offer")&&(offer_regular_price=t*$(this).index(),offer_price=parseInt($(this).find(".offer-price").text()),$(".main-price").find(".product-regular-price").text(offer_regular_price+" ден"),$(".main-price").find(".product-sale-price").text(offer_price+" ден")),$(".product-attributes div").removeClass("active"),$(this).toggleClass("active"),$(".attribute-title").css("color","#0f0f0f")}),$(document).on("click",".changeQuantity",function(t){t.preventDefault();var e=$(this).closest(".product_data").find(".prod_id").val(),a=$(this).closest(".product_data").find(".qty-input").val(),i=0;$(this).closest(".product_data").find(".attrib_id").val()>0&&(i=$(this).closest(".product_data").find(".attrib_id").val());var c=$("input[name=csrfmiddlewaretoken]").val();$.ajax({method:"POST",url:"/update-cart",data:{product_id:e,product_qty:a,attribute_id:i,csrfmiddlewaretoken:c},success:function(t){$(".cart-data").load(location.href+" .cart-data")}})}),$(document).on("click",".remove-item",function(t){t.preventDefault();var a=$(this).closest(".product_data").find(".prod_id").val(),i=parseInt($(this).closest(".product_data").find(".sidecart-item-quantity").text()),c=0;$(this).closest(".product_data").find(".attrib_id").val()>0&&(c=$(this).closest(".product_data").find(".attrib_id").val());var s=$("input[name=csrfmiddlewaretoken]").val();$.ajax({method:"POST",url:"/delete-cart-item",data:{product_id:a,attribute_id:c,csrfmiddlewaretoken:s},success:function(t){window.location.href.indexOf("checkout")>-1?($(".cart-data").load(location.href+" .cart-data"),$(".checkout-offers").load(location.href+" .checkout-offers")):(e-=parseInt(i),$(".sidecart-inner").load(location.href+" .sidecart-inner"),$("#cart-count").html(e))}})}),$(".checkout-fees").on("click",".fee-toggle",function(t){t.preventDefault(),$(this).find(".fee-icon").toggleClass("active"),$(this).closest(".checkout-fees").find(".fee-description").slideToggle("next")}),$(".checkout-fees").on("click",".fee-add",function(t){t.preventDefault(),button=$(this),fee_action="add",$(this).closest(".checkout-fees").hasClass("active")&&(fee_action="remove");var e=$(this).closest(".fee_data").find(".fee_id").val(),a=$("input[name=csrfmiddlewaretoken]").val();$.ajax({method:"POST",url:"/add-or-delete-fee",data:{fee_id:e,action:fee_action,csrfmiddlewaretoken:a},success:function(t){$(button).closest(".checkout-fees").hasClass("active")?($(button).toggleClass("addedBtn").html("ДОДАЈ"),$(button).closest(".checkout-fees").toggleClass("active")):($(button).toggleClass("addedBtn").html("ДОДАДЕН"),$(button).closest(".checkout-fees").toggleClass("active")),$(".cart-data").load(location.href+" .cart-data")}})}),$(".toggle-title").click(function(t){$(this).next(".toggle-content").slideToggle("fast")}),$(".checkout-dostava").click(function(t){$(".checkout-garancija").hasClass("active")&&($(".checkout-garancija").removeClass("active"),$(".checkout-garancija-content").slideToggle("fast")),$(this).toggleClass("active"),$(".checkout-dostava-content").slideToggle("fast")}),$(".checkout-garancija").click(function(t){$(".checkout-dostava").hasClass("active")&&($(".checkout-dostava").removeClass("active"),$(".checkout-dostava-content").slideToggle("fast")),$(this).toggleClass("active"),$(".checkout-garancija-content").slideToggle("fast")})});
